import{S as Ue,i as je,s as Be,k as R,l as C,m as D,h as I,n as E,b as Te,g as y,v as We,f as qe,P as Zt,Q as bt,d as w,W as Xe,K as $t,y as U,z as j,A as B,B as z,a as P,c as V,E as p,w as J,G as X,H as Z,F as $e,q as Pe,r as Ve,u as Ft,a0 as xt,T as tt,I as at,a1 as en,J as lt,X as ut,e as Nt,a2 as tn}from"../chunks/index.d0e80578.js";import{c as we}from"../chunks/clsx.1229b3e0.js";import{B as xe}from"../chunks/Button.3176fc52.js";import{f as Et}from"../chunks/index.df8b5887.js";import{I as Se}from"../chunks/Input.b4179fa1.js";import{L as Wt}from"../chunks/LogoBigSheep.7e0dfa0d.js";import{V as Ze,d as me}from"../chunks/store.e8a4a602.js";import{p as qt}from"../chunks/stores.c00a0dcb.js";import{u as nn}from"../chunks/uploadCSV.26e5ad8a.js";function yt(r,t,e){const l=r.slice();return l[5]=t[e],l}function It(r){let t,e;function l(){return r[4](r[5])}return t=new xe({props:{message:r[5],chooseType:"secondary",icon:"",size:"sm",classProp:"!py-4 text-white !bg-blackPrimary"}}),t.$on("click",l),{c(){U(t.$$.fragment)},l(a){j(t.$$.fragment,a)},m(a,u){B(t,a,u),e=!0},p(a,u){r=a;const n={};u&4&&(n.message=r[5]),t.$set(n)},i(a){e||(y(t.$$.fragment,a),e=!0)},o(a){w(t.$$.fragment,a),e=!1},d(a){z(t,a)}}}function ln(r){let t,e,l,a,u=r[2],n=[];for(let s=0;s<u.length;s+=1)n[s]=It(yt(r,u,s));const o=s=>w(n[s],1,1,()=>{n[s]=null});return{c(){t=R("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){t=C(s,"DIV",{class:!0});var c=D(t);for(let f=0;f<n.length;f+=1)n[f].l(c);c.forEach(I),this.h()},h(){E(t,"class",e=we("w-full p-1 py-2 flex flex-col gap-2 rounded-xl px-1 bg-[#e0e7f14c] backdrop-blur-sm text-black",{[r[1]]:!0}))},m(s,c){Te(s,t,c);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);a=!0},p(s,[c]){if(c&13){u=s[2];let f;for(f=0;f<u.length;f+=1){const _=yt(s,u,f);n[f]?(n[f].p(_,c),y(n[f],1)):(n[f]=It(_),n[f].c(),y(n[f],1),n[f].m(t,null))}for(We(),f=u.length;f<n.length;f+=1)o(f);qe()}(!a||c&2&&e!==(e=we("w-full p-1 py-2 flex flex-col gap-2 rounded-xl px-1 bg-[#e0e7f14c] backdrop-blur-sm text-black",{[s[1]]:!0})))&&E(t,"class",e)},i(s){if(!a){for(let c=0;c<u.length;c+=1)y(n[c]);Zt(()=>{a&&(l||(l=bt(t,Et,{y:-10,duration:300},!0)),l.run(1))}),a=!0}},o(s){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)w(n[c]);l||(l=bt(t,Et,{y:-10,duration:300},!1)),l.run(0),a=!1},d(s){s&&I(t),Xe(n,s),s&&l&&l.end()}}}function rn(r,t,e){const l=$t();let{classProps:a=""}=t,{value:u=""}=t,{array:n=[""]}=t;const o=s=>{e(0,u=s),l("click",u)};return r.$$set=s=>{"classProps"in s&&e(1,a=s.classProps),"value"in s&&e(0,u=s.value),"array"in s&&e(2,n=s.array)},[u,a,n,l,o]}class sn extends Ue{constructor(t){super(),je(this,t,rn,ln,Be,{classProps:1,value:0,array:2})}}function Tt(r){let t,e,l,a;function u(s){r[5](s)}function n(s){r[6](s)}let o={classProps:"absolute top-18 z-50"};return r[2]!==void 0&&(o.array=r[2]),r[0]!==void 0&&(o.value=r[0]),t=new sn({props:o}),J.push(()=>X(t,"array",u)),J.push(()=>X(t,"value",n)),t.$on("click",r[7]),{c(){U(t.$$.fragment)},l(s){j(t.$$.fragment,s)},m(s,c){B(t,s,c),a=!0},p(s,c){const f={};!e&&c&4&&(e=!0,f.array=s[2],Z(()=>e=!1)),!l&&c&1&&(l=!0,f.value=s[0],Z(()=>l=!1)),t.$set(f)},i(s){a||(y(t.$$.fragment,s),a=!0)},o(s){w(t.$$.fragment,s),a=!1},d(s){z(t,s)}}}function on(r){let t,e,l,a,u;e=new xe({props:{message:r[0],chooseType:"secondary",icon:"arrow",size:"sm",classProp:"w-full !py-4"}}),e.$on("click",r[4]);let n=r[1]&&Tt(r);return{c(){t=R("div"),U(e.$$.fragment),l=P(),n&&n.c(),this.h()},l(o){t=C(o,"DIV",{class:!0});var s=D(t);j(e.$$.fragment,s),l=V(s),n&&n.l(s),s.forEach(I),this.h()},h(){E(t,"class",a=we("w-full relative",r[3]))},m(o,s){Te(o,t,s),B(e,t,null),p(t,l),n&&n.m(t,null),u=!0},p(o,[s]){const c={};s&1&&(c.message=o[0]),e.$set(c),o[1]?n?(n.p(o,s),s&2&&y(n,1)):(n=Tt(o),n.c(),y(n,1),n.m(t,null)):n&&(We(),w(n,1,1,()=>{n=null}),qe()),(!u||s&8&&a!==(a=we("w-full relative",o[3])))&&E(t,"class",a)},i(o){u||(y(e.$$.fragment,o),y(n),u=!0)},o(o){w(e.$$.fragment,o),w(n),u=!1},d(o){o&&I(t),z(e),n&&n.d()}}}function an(r,t,e){let{selectedOption:l="Quarter Mean"}=t,{openMean:a=!1}=t,{array:u=["Quarter Mean","Mean of Mean","Mean of Mean of mean"]}=t,{customClass:n=""}=t;const o=()=>e(1,a=!a);function s(_){u=_,e(2,u)}function c(_){l=_,e(0,l)}const f=_=>{e(0,l=_.detail),e(1,a=!1)};return r.$$set=_=>{"selectedOption"in _&&e(0,l=_.selectedOption),"openMean"in _&&e(1,a=_.openMean),"array"in _&&e(2,u=_.array),"customClass"in _&&e(3,n=_.customClass)},[l,a,u,n,o,s,c,f]}class un extends Ue{constructor(t){super(),je(this,t,an,on,Be,{selectedOption:0,openMean:1,array:2,customClass:3})}}function wt(r,t,e){const l=r.slice();return l[3]=t[e],l}function Ot(r){let t,e,l=`${r[3].label}:`,a,u,n,o,s;return{c(){t=R("li"),e=R("label"),a=Pe(l),u=P(),n=R("input"),s=P(),this.h()},l(c){t=C(c,"LI",{class:!0});var f=D(t);e=C(f,"LABEL",{class:!0,for:!0});var _=D(e);a=Ve(_,l),_.forEach(I),u=V(f),n=C(f,"INPUT",{class:!0,id:!0,type:!0}),s=V(f),f.forEach(I),this.h()},h(){E(e,"class","text-end w-full max-w-[11rem] truncate"),E(e,"for","name"),n.value=o=r[1](r[3].value),E(n,"class","text-start bg-transparent"),E(n,"id","name"),E(n,"type","text"),n.disabled=!0,E(t,"class","w-full grid grid-cols-2 gap-2 text-[rgba(235,255,229,0.8)]")},m(c,f){Te(c,t,f),p(t,e),p(e,a),p(t,u),p(t,n),p(t,s)},p(c,f){f&1&&l!==(l=`${c[3].label}:`)&&Ft(a,l),f&1&&o!==(o=c[1](c[3].value))&&n.value!==o&&(n.value=o)},d(c){c&&I(t)}}}function fn(r){let t,e,l=r[0],a=[];for(let u=0;u<l.length;u+=1)a[u]=Ot(wt(r,l,u));return{c(){t=R("div"),e=R("ul");for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){t=C(u,"DIV",{class:!0});var n=D(t);e=C(n,"UL",{class:!0});var o=D(e);for(let s=0;s<a.length;s+=1)a[s].l(o);o.forEach(I),n.forEach(I),this.h()},h(){E(e,"class","w-full"),E(t,"class","w-full rounded-2xl result py-4 svelte-l1y7jz")},m(u,n){Te(u,t,n),p(t,e);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null)},p(u,[n]){if(n&3){l=u[0];let o;for(o=0;o<l.length;o+=1){const s=wt(u,l,o);a[o]?a[o].p(s,n):(a[o]=Ot(s),a[o].c(),a[o].m(e,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length}},i:$e,o:$e,d(u){u&&I(t),Xe(a,u)}}}function cn(r,t,e){let{options:l}=t,{unit:a}=t;const u=n=>{let o=n==null?void 0:n.toPrecision(4);var s=parseFloat(o);return`${s} ${a}`};return r.$$set=n=>{"options"in n&&e(0,l=n.options),"unit"in n&&e(2,a=n.unit)},[l,u,a]}class Fe extends Ue{constructor(t){super(),je(this,t,cn,fn,Be,{options:0,unit:2})}}const _n=(r,t,e,l)=>r+t*e/l,pn=(r,t,e,l)=>r-t*e/l,Mt=(r,t,e,l,a,u,n)=>{let o=l[0],s=l[1],c=l[2],f=n(r,o,a,u),_=n(t,s,a,u),b=n(e,c,a,u),M=b-f,T=_-(b+f)/2,k=(b+f+_*6)/8,h=(_+(b+f)/2)/2,G=(k+h)/2;return{trim:M,flessione:T,mean:{quarterMean:k,meanOfMean:h,meanOfMeanOfMean:G}}},gn=(r,t,e,l,a,u,n,o)=>{let s=(r+l)/2,c=(t+a)/2,f=(e+u)/2,_=f-s;return _>=0?Mt(s,c,f,n,_,o,_n):Mt(s,c,f,n,_,o,pn)},dn=(r,t,e)=>{switch(t){case"Quarter Mean":return r.quarterMean-e;case"Mean of Mean":return r.meanOfMean-e;case"Mean of Mean of mean":return r.meanOfMeanOfMean-e;default:throw console.error("Error: Mean not found")}},mn=(r,t)=>{switch(r){case"Quarter Mean":return t.quarterMean;case"Mean of Mean":return t.meanOfMean;case"Mean of Mean of mean":return t.meanOfMeanOfMean;default:throw console.error("Error: Mean not found")}},nt=(r,t,e,l,a,u)=>{let n=r/a,o=t-e[0],s=n*o;return e[u]<l[u]?s+e[u]:e[u]-s},ot=(r,t,e)=>{let l=r.tables.map(M=>M[0]).flat(),a=l.indexOf(l.filter(M=>M<t).slice(-1)[0]),u=l.indexOf(l.filter(M=>M>t)[0]),n=r.tables[a],o=r.tables[u];console.log("lessRow:",n),console.log("moreRow:",o),console.log("meanCorrected:",t);let s=o[0]-n[0],c=o[1]-n[1],f=o[2]-n[2],_=o[3]-n[3],b=o[4]-n[4];return e?nt(_,t,n,o,s,3):{DIS:nt(c,t,n,o,s,1),TPC:nt(f,t,n,o,s,2),LCF:nt(b,t,n,o,s,4)}},hn=(r,t,e,l,a,u,n,o)=>{let s=r*t*e*100/l,c=r*r*(a-u)*50/l,f=(n+s+c)*o/1.025,_=f-(n+s+c);return{TRIM_CORRECTION_1:s,TRIM_CORRECTION_2:c,FINAL_DISPLACEMENT:f,DENSITY_CORRECTION:_}},vn=(r,t,e,l)=>{let a=r-t,u=bn(l),n=a-u,o=a-u;return e&&(n=o-e),{DWT:a,CARGO:n,COSTANT:o,DEDUCTIONS:u}},bn=r=>r.reduce((t,e)=>t+e.value,0);function Rt(r,t,e){const l=r.slice();return l[3]=t[e],l}function Ct(r,t){let e,l,a,u,n,o,s=t[3]+"",c,f,_,b,M;function T(){return t[2](t[3])}return{key:r,first:null,c(){e=R("button"),l=R("div"),n=P(),o=R("div"),c=Pe(s),_=P(),this.h()},l(k){e=C(k,"BUTTON",{class:!0});var h=D(e);l=C(h,"DIV",{class:!0,id:!0}),D(l).forEach(I),n=V(h),o=C(h,"DIV",{class:!0});var G=D(o);c=Ve(G,s),G.forEach(I),_=V(h),h.forEach(I),this.h()},h(){E(l,"class",a=tt(we("radio w-5 h-5 rounded-full border-[4px] border-gray-300 bg-[#485544] outline-none text-transparent",{"bg-greenAccent":t[0]===t[3]}))+" svelte-vm48ny"),E(l,"id",u=t[3]),E(o,"class",f=tt(we({"text-greenAccent":t[0]===t[3]}))+" svelte-vm48ny"),E(e,"class","w-full flex justify-start items-center gap-2"),this.first=e},m(k,h){Te(k,e,h),p(e,l),p(e,n),p(e,o),p(o,c),p(e,_),b||(M=at(e,"click",T),b=!0)},p(k,h){t=k,h&3&&a!==(a=tt(we("radio w-5 h-5 rounded-full border-[4px] border-gray-300 bg-[#485544] outline-none text-transparent",{"bg-greenAccent":t[0]===t[3]}))+" svelte-vm48ny")&&E(l,"class",a),h&2&&u!==(u=t[3])&&E(l,"id",u),h&2&&s!==(s=t[3]+"")&&Ft(c,s),h&3&&f!==(f=tt(we({"text-greenAccent":t[0]===t[3]}))+" svelte-vm48ny")&&E(o,"class",f)},d(k){k&&I(e),b=!1,M()}}}function Nn(r){let t,e=[],l=new Map,a=r[1];const u=n=>n[3];for(let n=0;n<a.length;n+=1){let o=Rt(r,a,n),s=u(o);l.set(s,e[n]=Ct(s,o))}return{c(){t=R("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=C(n,"DIV",{class:!0});var o=D(t);for(let s=0;s<e.length;s+=1)e[s].l(o);o.forEach(I),this.h()},h(){E(t,"class","w-full flex flex-col gap-3 py-2")},m(n,o){Te(n,t,o);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(t,null)},p(n,[o]){o&3&&(a=n[1],e=xt(e,o,u,1,n,a,l,t,en,Ct,null,Rt))},i:$e,o:$e,d(n){n&&I(t);for(let o=0;o<e.length;o+=1)e[o].d()}}}function En(r,t,e){let{options:l=[""]}=t,{selectedOption:a=l[0]}=t;const u=n=>{e(0,a=n)};return r.$$set=n=>{"options"in n&&e(1,l=n.options),"selectedOption"in n&&e(0,a=n.selectedOption)},[a,l,u]}class yn extends Ue{constructor(t){super(),je(this,t,En,Nn,Be,{options:1,selectedOption:0})}}function In(r){let t,e,l,a,u,n,o,s,c,f,_,b,M,T,k,h,G,Q,ee,ae,S,H,v,be,$,Ne,ie,te,he;function ve(g){r[6](g)}function Oe(g){r[7](g)}let Ee={label:"Voy Nr",className:"w-full",id:"name",type:"number"};r[2].voy!==void 0&&(Ee.valueN=r[2].voy),r[3]!==void 0&&(Ee.isError=r[3]),s=new Se({props:Ee}),J.push(()=>X(s,"valueN",ve)),J.push(()=>X(s,"isError",Oe));function ce(g){r[8](g)}function Me(g){r[9](g)}let oe={label:"Year",className:"w-full",id:"name",type:"number"};r[2].year!==void 0&&(oe.valueN=r[2].year),r[3]!==void 0&&(oe.isError=r[3]),b=new Se({props:oe}),J.push(()=>X(b,"valueN",ce)),J.push(()=>X(b,"isError",Me));function Re(g){r[10](g)}function N(g){r[11](g)}let O={label:"Port",className:"w-full col-span-2",id:"name",type:"text"};r[2].Port!==void 0&&(O.valueT=r[2].Port),r[3]!==void 0&&(O.isError=r[3]),h=new Se({props:O}),J.push(()=>X(h,"valueT",Re)),J.push(()=>X(h,"isError",N));function ne(g){r[12](g)}function ue(g){r[13](g)}let re={};return r[0]!==void 0&&(re.options=r[0]),r[1]!==void 0&&(re.selectedOption=r[1]),S=new yn({props:re}),J.push(()=>X(S,"options",ne)),J.push(()=>X(S,"selectedOption",ue)),$=new xe({props:{spaceAll:!1,chooseType:"for-form",icon:"",size:"md",message:"Next",classProp:"max-w-[10rem] !static"}}),$.$on("click",r[14]),te=new Wt({}),{c(){t=R("div"),e=R("h1"),l=Pe("NEW SURVEY"),a=P(),u=R("div"),n=R("div"),o=R("div"),U(s.$$.fragment),_=P(),U(b.$$.fragment),k=P(),U(h.$$.fragment),ee=P(),ae=R("div"),U(S.$$.fragment),be=P(),U($.$$.fragment),Ne=P(),ie=R("div"),U(te.$$.fragment),this.h()},l(g){t=C(g,"DIV",{class:!0});var L=D(t);e=C(L,"H1",{class:!0});var K=D(e);l=Ve(K,"NEW SURVEY"),K.forEach(I),a=V(L),u=C(L,"DIV",{class:!0});var A=D(u);n=C(A,"DIV",{class:!0});var x=D(n);o=C(x,"DIV",{class:!0});var le=D(o);j(s.$$.fragment,le),_=V(le),j(b.$$.fragment,le),k=V(le),j(h.$$.fragment,le),le.forEach(I),ee=V(x),ae=C(x,"DIV",{class:!0});var se=D(ae);j(S.$$.fragment,se),se.forEach(I),be=V(x),j($.$$.fragment,x),x.forEach(I),Ne=V(A),ie=C(A,"DIV",{class:!0});var ye=D(ie);j(te.$$.fragment,ye),ye.forEach(I),A.forEach(I),L.forEach(I),this.h()},h(){E(e,"class","w-full p-2 py-4 text-[2rem]"),E(o,"class","form grid grid-cols-2 gap-4 text-start"),E(ae,"class","level w-full"),E(n,"class","basis-2/3 flex flex-col gap-8"),E(ie,"class","basis-1/3 flex justify-center items-center"),E(u,"class","w-full p-2 py-4 flex justify-center items-center gap-6"),E(t,"class","w-full text-white text-center p-2 relative")},m(g,L){Te(g,t,L),p(t,e),p(e,l),p(t,a),p(t,u),p(u,n),p(n,o),B(s,o,null),p(o,_),B(b,o,null),p(o,k),B(h,o,null),p(n,ee),p(n,ae),B(S,ae,null),p(n,be),B($,n,null),p(u,Ne),p(u,ie),B(te,ie,null),he=!0},p(g,[L]){const K={};!c&&L&4&&(c=!0,K.valueN=g[2].voy,Z(()=>c=!1)),!f&&L&8&&(f=!0,K.isError=g[3],Z(()=>f=!1)),s.$set(K);const A={};!M&&L&4&&(M=!0,A.valueN=g[2].year,Z(()=>M=!1)),!T&&L&8&&(T=!0,A.isError=g[3],Z(()=>T=!1)),b.$set(A);const x={};!G&&L&4&&(G=!0,x.valueT=g[2].Port,Z(()=>G=!1)),!Q&&L&8&&(Q=!0,x.isError=g[3],Z(()=>Q=!1)),h.$set(x);const le={};!H&&L&1&&(H=!0,le.options=g[0],Z(()=>H=!1)),!v&&L&2&&(v=!0,le.selectedOption=g[1],Z(()=>v=!1)),S.$set(le)},i(g){he||(y(s.$$.fragment,g),y(b.$$.fragment,g),y(h.$$.fragment,g),y(S.$$.fragment,g),y($.$$.fragment,g),y(te.$$.fragment,g),he=!0)},o(g){w(s.$$.fragment,g),w(b.$$.fragment,g),w(h.$$.fragment,g),w(S.$$.fragment,g),w($.$$.fragment,g),w(te.$$.fragment,g),he=!1},d(g){g&&I(t),z(s),z(b),z(h),z(S),z($),z(te)}}}function Tn(r,t,e){let l,a,u;lt(r,Ze,v=>e(5,a=v)),lt(r,qt,v=>e(16,u=v));let{options:n=["Initial","Intermediate","Final"]}=t,{selectedOption:o="Initial"}=t,{data:s={voy:NaN,year:NaN,Port:""}}=t,c=!1,f=u.params.id,_=a.findIndex(v=>v.id===f);const b=()=>{if(M()){e(3,c=!0);return}console.log("error passed",c),console.log(f),l&&ut(Ze,a[_]={...l,status:o,initialData:s},a)},M=()=>!!(isNaN(s.voy)||isNaN(s.year)||s.Port==="");function T(v){r.$$.not_equal(s.voy,v)&&(s.voy=v,e(2,s))}function k(v){c=v,e(3,c)}function h(v){r.$$.not_equal(s.year,v)&&(s.year=v,e(2,s))}function G(v){c=v,e(3,c)}function Q(v){r.$$.not_equal(s.Port,v)&&(s.Port=v,e(2,s))}function ee(v){c=v,e(3,c)}function ae(v){n=v,e(0,n)}function S(v){o=v,e(1,o)}const H=()=>b();return r.$$set=v=>{"options"in v&&e(0,n=v.options),"selectedOption"in v&&e(1,o=v.selectedOption),"data"in v&&e(2,s=v.data)},r.$$.update=()=>{r.$$.dirty&32&&(l=a.find(v=>v.id===f)||void 0)},[n,o,s,c,b,a,T,k,h,G,Q,ee,ae,S,H]}class wn extends Ue{constructor(t){super(),je(this,t,Tn,In,Be,{options:0,selectedOption:1,data:2})}}function Dt(r,t,e){const l=r.slice();return l[34]=t[e],l[35]=t,l[36]=e,l}function kt(r,t,e){const l=r.slice();return l[37]=t[e],l[38]=t,l[39]=e,l}function Pt(r,t,e){const l=r.slice();return l[40]=t[e],l[41]=t,l[42]=e,l}function On(r){let t,e,l,a,u,n,o,s,c,f,_,b,M,T,k,h,G,Q,ee,ae,S,H,v,be,$,Ne,ie,te,he,ve,Oe,Ee,ce,Me,oe,Re,N,O,ne,ue,re,g,L,K,A,x,le,se,ye,Ae,_e,ze,Le,pe,rt,et,st,it,Ce=r[12],F=[];for(let i=0;i<Ce.length;i+=1)F[i]=Vt(Pt(r,Ce,i));const Ut=i=>w(F[i],1,1,()=>{F[i]=null});k=new Wt({props:{divisor:2}});let De=r[11],W=[];for(let i=0;i<De.length;i+=1)W[i]=St(kt(r,De,i));const jt=i=>w(W[i],1,1,()=>{W[i]=null});v=new xe({props:{spaceAll:!1,chooseType:"only-icon",icon:"less",size:"md"}}),v.$on("click",r[19]);function Bt(i){r[20](i)}let ft={className:"w-[8rem] ",disabled:!1,id:"name",type:"number"};r[1]!==void 0&&(ft.valueN=r[1]),$=new Se({props:ft}),J.push(()=>X($,"valueN",Bt)),te=new xe({props:{spaceAll:!1,chooseType:"only-icon",icon:"plus",size:"md"}}),te.$on("click",r[21]);let ke=r[10],q=[];for(let i=0;i<ke.length;i+=1)q[i]=At(Dt(r,ke,i));const zt=i=>w(q[i],1,1,()=>{q[i]=null});function Ht(i){r[23](i)}let ct={customClass:"my-4",openMean:Cn};r[2]!==void 0&&(ct.selectedOption=r[2]),oe=new un({props:ct}),J.push(()=>X(oe,"selectedOption",Ht));function Yt(i){r[24](i)}let _t={unit:"m"};r[8]!==void 0&&(_t.options=r[8]),ne=new Fe({props:_t}),J.push(()=>X(ne,"options",Yt));function Gt(i){r[25](i)}let pt={unit:"M"};r[7]!==void 0&&(pt.options=r[7]),g=new Fe({props:pt}),J.push(()=>X(g,"options",Gt));function Qt(i){r[26](i)}let gt={unit:"M"};r[6]!==void 0&&(gt.options=r[6]),A=new Fe({props:gt}),J.push(()=>X(A,"options",Qt));function Kt(i){r[27](i)}let dt={unit:"M"};r[5]!==void 0&&(dt.options=r[5]),se=new Fe({props:dt}),J.push(()=>X(se,"options",Kt));function Jt(i){r[28](i)}let mt={unit:"M"};r[4]!==void 0&&(mt.options=r[4]),_e=new Fe({props:mt}),J.push(()=>X(_e,"options",Jt));function Xt(i){r[29](i)}let ht={unit:"M"};return r[3]!==void 0&&(ht.options=r[3]),pe=new Fe({props:ht}),J.push(()=>X(pe,"options",Xt)),{c(){t=R("div"),e=R("div"),l=R("button"),a=Pe("calc"),u=P(),n=R("input"),o=P(),s=R("h2"),c=Pe("Drafts"),f=P(),_=R("div"),b=R("div");for(let i=0;i<F.length;i+=1)F[i].c();M=P(),T=R("div"),U(k.$$.fragment),h=P(),G=R("div");for(let i=0;i<W.length;i+=1)W[i].c();Q=P(),ee=R("h2"),ae=Pe("Water Density"),S=P(),H=R("div"),U(v.$$.fragment),be=P(),U($.$$.fragment),ie=P(),U(te.$$.fragment),he=P(),ve=R("h2"),Oe=Pe("Weight"),Ee=P(),ce=R("div");for(let i=0;i<q.length;i+=1)q[i].c();Me=P(),U(oe.$$.fragment),N=P(),O=R("div"),U(ne.$$.fragment),re=P(),U(g.$$.fragment),K=P(),U(A.$$.fragment),le=P(),U(se.$$.fragment),Ae=P(),U(_e.$$.fragment),Le=P(),U(pe.$$.fragment),this.h()},l(i){t=C(i,"DIV",{class:!0});var d=D(t);e=C(d,"DIV",{class:!0});var Y=D(e);l=C(Y,"BUTTON",{class:!0});var He=D(l);a=Ve(He,"calc"),He.forEach(I),u=V(Y),n=C(Y,"INPUT",{placeholder:!0,type:!0,accept:!0}),Y.forEach(I),o=V(d),s=C(d,"H2",{class:!0});var Ye=D(s);c=Ve(Ye,"Drafts"),Ye.forEach(I),f=V(d),_=C(d,"DIV",{class:!0});var Ie=D(_);b=C(Ie,"DIV",{class:!0});var Ge=D(b);for(let de=0;de<F.length;de+=1)F[de].l(Ge);Ge.forEach(I),M=V(Ie),T=C(Ie,"DIV",{});var Qe=D(T);j(k.$$.fragment,Qe),Qe.forEach(I),h=V(Ie),G=C(Ie,"DIV",{class:!0});var Ke=D(G);for(let de=0;de<W.length;de+=1)W[de].l(Ke);Ke.forEach(I),Ie.forEach(I),Q=V(d),ee=C(d,"H2",{class:!0});var Je=D(ee);ae=Ve(Je,"Water Density"),Je.forEach(I),S=V(d),H=C(d,"DIV",{class:!0});var m=D(H);j(v.$$.fragment,m),be=V(m),j($.$$.fragment,m),ie=V(m),j(te.$$.fragment,m),m.forEach(I),he=V(d),ve=C(d,"H2",{class:!0});var ge=D(ve);Oe=Ve(ge,"Weight"),ge.forEach(I),Ee=V(d),ce=C(d,"DIV",{class:!0});var vt=D(ce);for(let de=0;de<q.length;de+=1)q[de].l(vt);vt.forEach(I),Me=V(d),j(oe.$$.fragment,d),N=V(d),O=C(d,"DIV",{class:!0});var fe=D(O);j(ne.$$.fragment,fe),re=V(fe),j(g.$$.fragment,fe),K=V(fe),j(A.$$.fragment,fe),le=V(fe),j(se.$$.fragment,fe),Ae=V(fe),j(_e.$$.fragment,fe),Le=V(fe),j(pe.$$.fragment,fe),fe.forEach(I),d.forEach(I),this.h()},h(){E(l,"class","w-[6rem] py-1 font-bold bg-white rounded-xl text-black text-[1.5rem]"),E(n,"placeholder",""),E(n,"type","file"),E(n,"accept",".csv"),E(e,"class","w-full flex justify-around items-center"),E(s,"class","text-[2em] py-4"),E(b,"class","flex flex-col gap-4"),E(G,"class","flex flex-col gap-4"),E(_,"class","w-full flex justify-around"),E(ee,"class","text-[2em] py-4"),E(H,"class","w-full flex justify-center items-center gap-4"),E(ve,"class","text-[2em]"),E(ce,"class","w-full grid grid-cols-2 gap-4 place-items-center pb-4"),E(O,"class","w-full flex flex-col justify-center items-center gap-4"),E(t,"class","w-full text-center text-whitePrimary bg-blackPrimary px-4 pb-56")},m(i,d){Te(i,t,d),p(t,e),p(e,l),p(l,a),p(e,u),p(e,n),p(t,o),p(t,s),p(s,c),p(t,f),p(t,_),p(_,b);for(let Y=0;Y<F.length;Y+=1)F[Y]&&F[Y].m(b,null);p(_,M),p(_,T),B(k,T,null),p(_,h),p(_,G);for(let Y=0;Y<W.length;Y+=1)W[Y]&&W[Y].m(G,null);p(t,Q),p(t,ee),p(ee,ae),p(t,S),p(t,H),B(v,H,null),p(H,be),B($,H,null),p(H,ie),B(te,H,null),p(t,he),p(t,ve),p(ve,Oe),p(t,Ee),p(t,ce);for(let Y=0;Y<q.length;Y+=1)q[Y]&&q[Y].m(ce,null);p(t,Me),B(oe,t,null),p(t,N),p(t,O),B(ne,O,null),p(O,re),B(g,O,null),p(O,K),B(A,O,null),p(O,le),B(se,O,null),p(O,Ae),B(_e,O,null),p(O,Le),B(pe,O,null),et=!0,st||(it=[at(l,"click",r[13]),at(n,"change",r[16])],st=!0)},p(i,d){if(d[0]&4096){Ce=i[12];let m;for(m=0;m<Ce.length;m+=1){const ge=Pt(i,Ce,m);F[m]?(F[m].p(ge,d),y(F[m],1)):(F[m]=Vt(ge),F[m].c(),y(F[m],1),F[m].m(b,null))}for(We(),m=Ce.length;m<F.length;m+=1)Ut(m);qe()}if(d[0]&2048){De=i[11];let m;for(m=0;m<De.length;m+=1){const ge=kt(i,De,m);W[m]?(W[m].p(ge,d),y(W[m],1)):(W[m]=St(ge),W[m].c(),y(W[m],1),W[m].m(G,null))}for(We(),m=De.length;m<W.length;m+=1)jt(m);qe()}const Y={};if(!Ne&&d[0]&2&&(Ne=!0,Y.valueN=i[1],Z(()=>Ne=!1)),$.$set(Y),d[0]&1024){ke=i[10];let m;for(m=0;m<ke.length;m+=1){const ge=Dt(i,ke,m);q[m]?(q[m].p(ge,d),y(q[m],1)):(q[m]=At(ge),q[m].c(),y(q[m],1),q[m].m(ce,null))}for(We(),m=ke.length;m<q.length;m+=1)zt(m);qe()}const He={};!Re&&d[0]&4&&(Re=!0,He.selectedOption=i[2],Z(()=>Re=!1)),oe.$set(He);const Ye={};!ue&&d[0]&256&&(ue=!0,Ye.options=i[8],Z(()=>ue=!1)),ne.$set(Ye);const Ie={};!L&&d[0]&128&&(L=!0,Ie.options=i[7],Z(()=>L=!1)),g.$set(Ie);const Ge={};!x&&d[0]&64&&(x=!0,Ge.options=i[6],Z(()=>x=!1)),A.$set(Ge);const Qe={};!ye&&d[0]&32&&(ye=!0,Qe.options=i[5],Z(()=>ye=!1)),se.$set(Qe);const Ke={};!ze&&d[0]&16&&(ze=!0,Ke.options=i[4],Z(()=>ze=!1)),_e.$set(Ke);const Je={};!rt&&d[0]&8&&(rt=!0,Je.options=i[3],Z(()=>rt=!1)),pe.$set(Je)},i(i){if(!et){for(let d=0;d<Ce.length;d+=1)y(F[d]);y(k.$$.fragment,i);for(let d=0;d<De.length;d+=1)y(W[d]);y(v.$$.fragment,i),y($.$$.fragment,i),y(te.$$.fragment,i);for(let d=0;d<ke.length;d+=1)y(q[d]);y(oe.$$.fragment,i),y(ne.$$.fragment,i),y(g.$$.fragment,i),y(A.$$.fragment,i),y(se.$$.fragment,i),y(_e.$$.fragment,i),y(pe.$$.fragment,i),et=!0}},o(i){F=F.filter(Boolean);for(let d=0;d<F.length;d+=1)w(F[d]);w(k.$$.fragment,i),W=W.filter(Boolean);for(let d=0;d<W.length;d+=1)w(W[d]);w(v.$$.fragment,i),w($.$$.fragment,i),w(te.$$.fragment,i),q=q.filter(Boolean);for(let d=0;d<q.length;d+=1)w(q[d]);w(oe.$$.fragment,i),w(ne.$$.fragment,i),w(g.$$.fragment,i),w(A.$$.fragment,i),w(se.$$.fragment,i),w(_e.$$.fragment,i),w(pe.$$.fragment,i),et=!1},d(i){i&&I(t),Xe(F,i),z(k),Xe(W,i),z(v),z($),z(te),Xe(q,i),z(oe),z(ne),z(g),z(A),z(se),z(_e),z(pe),st=!1,tn(it)}}}function Mn(r){let t,e;return t=new wn({}),{c(){U(t.$$.fragment)},l(l){j(t.$$.fragment,l)},m(l,a){B(t,l,a),e=!0},p:$e,i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){w(t.$$.fragment,l),e=!1},d(l){z(t,l)}}}function Vt(r){let t,e,l;function a(n){r[17](n,r[40])}let u={className:"w-[6rem]",type:"number"};return r[40].value!==void 0&&(u.valueN=r[40].value),t=new Se({props:u}),J.push(()=>X(t,"valueN",a)),{c(){U(t.$$.fragment)},l(n){j(t.$$.fragment,n)},m(n,o){B(t,n,o),l=!0},p(n,o){r=n;const s={};!e&&o[0]&4096&&(e=!0,s.valueN=r[40].value,Z(()=>e=!1)),t.$set(s)},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){z(t,n)}}}function St(r){let t,e,l;function a(n){r[18](n,r[37])}let u={className:"w-[6rem]",type:"number"};return r[37].value!==void 0&&(u.valueN=r[37].value),t=new Se({props:u}),J.push(()=>X(t,"valueN",a)),{c(){U(t.$$.fragment)},l(n){j(t.$$.fragment,n)},m(n,o){B(t,n,o),l=!0},p(n,o){r=n;const s={};!e&&o[0]&2048&&(e=!0,s.valueN=r[37].value,Z(()=>e=!1)),t.$set(s)},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){z(t,n)}}}function At(r){let t,e,l;function a(n){r[22](n,r[34])}let u={label:r[34].name,className:"w-[8rem]",id:"name",type:"number"};return r[34].value!==void 0&&(u.valueN=r[34].value),t=new Se({props:u}),J.push(()=>X(t,"valueN",a)),{c(){U(t.$$.fragment)},l(n){j(t.$$.fragment,n)},m(n,o){B(t,n,o),l=!0},p(n,o){r=n;const s={};o[0]&1024&&(s.label=r[34].name),!e&&o[0]&1024&&(e=!0,s.valueN=r[34].value,Z(()=>e=!1)),t.$set(s)},i(n){l||(y(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){z(t,n)}}}function Rn(r){let t,e,l,a;const u=[Mn,On],n=[];function o(s,c){return s[9]==="undefined"?0:1}return t=o(r),e=n[t]=u[t](r),{c(){e.c(),l=Nt()},l(s){e.l(s),l=Nt()},m(s,c){n[t].m(s,c),Te(s,l,c),a=!0},p(s,c){let f=t;t=o(s),t===f?n[t].p(s,c):(We(),w(n[f],1,1,()=>{n[f]=null}),qe(),e=n[t],e?e.p(s,c):(e=n[t]=u[t](s),e.c()),y(e,1),e.m(l.parentNode,l))},i(s){a||(y(e),a=!0)},o(s){w(e),a=!1},d(s){n[t].d(s),s&&I(l)}}}let Cn=!1,Lt=0;function Dn(r,t,e){let l,a,u,n,o,s,c,f,_,b,M,T,k,h,G;lt(r,Ze,N=>e(0,h=N)),lt(r,qt,N=>e(32,G=N));let Q=0,ee="Quarter Mean";const ae=()=>{if(!l)return;ut(Ze,h[H]={...l,categories:u,draftLeft:n,draftRight:o,weight:s,waterDensityValue:Q},h);let N=l.start_value[0].value,O=l.start_value[2].value,ne=l.start_value[6].value,ue=gn(n[0].value,n[1].value,n[2].value,o[0].value,o[1].value,o[2].value,a,l.start_value[4].value),re=dn(ue.mean,ee,ne),g=re+.5,L=re-.5,K=ot(l,re,!1),A=ot(l,g,!0),x=ot(l,L,!0);const{DENSITY_CORRECTION:le,FINAL_DISPLACEMENT:se,TRIM_CORRECTION_1:ye,TRIM_CORRECTION_2:Ae}=hn(ue.trim,K.TPC,K.LCF,O,A,x,K.DISPLACEMENT,Q),{CARGO:_e,COSTANT:ze,DWT:Le,DEDUCTIONS:pe}=vn(se,N,Lt,s);console.log("TABLE",K),console.log("MTC1",A),console.log("MTC2",x),console.log("DENSITY_CORRECTION",le),console.log("FINAL_DISPLACEMENT",se),console.log("TRIM_CORRECTION_1",ye),console.log("TRIM_CORRECTION_2",Ae),console.log("CARGO",_e),console.log("COSTANT",ze),console.log("DWT",Le),e(8,f[0].value=ue.trim,f),e(8,f[1].value=0,f),e(8,f[2].value=mn(ee,ue.mean),f),e(8,f[3].value=ne,f),e(8,f[4].value=re,f),e(7,_[0].value=K.DIS,_),e(7,_[1].value=K.TPC,_),e(7,_[2].value=K.LCF,_),e(7,_[3].value=A,_),e(7,_[4].value=x,_),e(7,_[5].value=re,_),e(6,b[0].value=ye,b),e(6,b[1].value=Ae,b),e(6,b[2].value=le,b),e(5,M[0].value=se,M),e(5,M[1].value=N,M),e(5,M[2].value=Le,M),e(4,T[0].value=s[0].value,T),e(4,T[1].value=s[1].value,T),e(4,T[2].value=s[2].value,T),e(4,T[3].value=s[3].value,T),e(4,T[4].value=s[4].value,T),e(4,T[5].value=s[5].value,T),e(4,T[6].value=s[6].value,T),e(4,T[7].value=pe,T),ut(Ze,h[H]={...l,results:{trimResult:f,displacementResult:_,correctionsResult:b,finalDisplacementResult:M,weightResult:T,constantR:Lt}},h),e(15,l=h[H])};let S=G.params.id,H=h.findIndex(N=>N.id===S);const v=N=>nn(N,h,H);function be(N,O){r.$$.not_equal(O.value,N)&&(O.value=N,e(12,n),e(15,l),e(0,h),e(33,S))}function $(N,O){r.$$.not_equal(O.value,N)&&(O.value=N,e(11,o),e(15,l),e(0,h),e(33,S))}const Ne=()=>e(1,Q--,Q);function ie(N){Q=N,e(1,Q)}const te=()=>e(1,Q++,Q);function he(N,O){r.$$.not_equal(O.value,N)&&(O.value=N,e(10,s),e(15,l),e(0,h),e(33,S))}function ve(N){ee=N,e(2,ee)}function Oe(N){f=N,e(8,f),e(15,l),e(0,h),e(33,S)}function Ee(N){_=N,e(7,_),e(15,l),e(0,h),e(33,S)}function ce(N){b=N,e(6,b),e(15,l),e(0,h),e(33,S)}function Me(N){M=N,e(5,M),e(15,l),e(0,h),e(33,S)}function oe(N){T=N,e(4,T),e(15,l),e(0,h),e(33,S)}function Re(N){k=N,e(3,k),e(15,l),e(0,h),e(33,S)}return r.$$.update=()=>{var N,O,ne,ue,re,g,L,K,A;r.$$.dirty[0]&1&&e(15,l=h.find(x=>x.id===S)||void 0),r.$$.dirty[0]&32768&&(a=[(N=l==null?void 0:l.start_value[1])==null?void 0:N.value,(O=l==null?void 0:l.start_value[3])==null?void 0:O.value,(ne=l==null?void 0:l.start_value[5])==null?void 0:ne.value]),r.$$.dirty[0]&32768&&(u=(l==null?void 0:l.categories)||me.categories),r.$$.dirty[0]&32768&&e(12,n=(l==null?void 0:l.draftLeft)||me.draftLeft),r.$$.dirty[0]&32768&&e(11,o=(l==null?void 0:l.draftRight)||me.draftRight),r.$$.dirty[0]&32768&&e(10,s=(l==null?void 0:l.weight)||me.weight),r.$$.dirty[0]&32768&&e(9,c=(l==null?void 0:l.status)||"undefined"),r.$$.dirty[0]&32768&&e(8,f=((ue=l==null?void 0:l.results)==null?void 0:ue.trimResult)||me.results.trimResult),r.$$.dirty[0]&32768&&e(7,_=((re=l==null?void 0:l.results)==null?void 0:re.displacementResult)||me.results.displacementResult),r.$$.dirty[0]&32768&&e(6,b=((g=l==null?void 0:l.results)==null?void 0:g.correctionsResult)||me.results.correctionsResult),r.$$.dirty[0]&32768&&e(5,M=((L=l==null?void 0:l.results)==null?void 0:L.finalDisplacementResult)||me.results.finalDisplacementResult),r.$$.dirty[0]&32768&&e(4,T=((K=l==null?void 0:l.results)==null?void 0:K.weightResult)||me.results.weightResult),r.$$.dirty[0]&32768&&e(3,k=((A=l==null?void 0:l.results)==null?void 0:A.constantR)||me.results.constantR)},e(1,Q=me.waterDensityValue||0),[h,Q,ee,k,T,M,b,_,f,c,s,o,n,ae,H,l,v,be,$,Ne,ie,te,he,ve,Oe,Ee,ce,Me,oe,Re]}class Un extends Ue{constructor(t){super(),je(this,t,Dn,Rn,Be,{},null,[-1,-1])}}export{Un as component};
